!function(c){var i="unobtrusiveAjaxClick",u="unobtrusiveAjaxClickTarget",o="unobtrusiveValidation";function d(t,a){for(var e=window,r=(t||"").split(".");e&&r.length;)e=e[r.shift()];return"function"==typeof e?e:(a.push(t),Function.constructor.apply(null,a))}function s(t){return"GET"===t||"POST"===t}function l(u,t){var a,n,i,o;(a=u.getAttribute("data-ajax-confirm"))&&!window.confirm(a)||(n=c(u.getAttribute("data-ajax-loading")),o=parseInt(u.getAttribute("data-ajax-loading-duration"),10)||0,c.extend(t,{type:u.getAttribute("data-ajax-method")||void 0,url:u.getAttribute("data-ajax-url")||void 0,cache:"true"===(u.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(t){var a,e,r;return e=t,!s(r=i)&&e.setRequestHeader("X-HTTP-Method-Override",r),!1!==(a=d(u.getAttribute("data-ajax-begin"),["xhr"]).apply(u,arguments))&&n.show(o),a},complete:function(){n.hide(o),d(u.getAttribute("data-ajax-complete"),["xhr","status"]).apply(u,arguments)},success:function(t,a,e){var r,n,i;r=u,n=t,-1===(e.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(i=(r.getAttribute("data-ajax-mode")||"").toUpperCase(),c(r.getAttribute("data-ajax-update")).each(function(t,a){var e;switch(i){case"BEFORE":e=a.firstChild,c("<div />").html(n).contents().each(function(){a.insertBefore(this,e)});break;case"AFTER":c("<div />").html(n).contents().each(function(){a.appendChild(this)});break;case"REPLACE-WITH":c(a).replaceWith(n);break;default:c(a).html(n)}})),d(u.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(u,arguments)},error:function(){d(u.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(u,arguments)}}),t.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),s(i=t.type.toUpperCase())||(t.type="POST",t.data.push({name:"X-HTTP-Method-Override",value:i})),c.ajax(t))}c(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),l(this,{url:this.href,type:"GET",data:[]})}),c(document).on("click","form[data-ajax=true] input[type=image]",function(t){var a=t.target.name,e=c(t.target),r=c(e.parents("form")[0]),n=e.offset();r.data(i,[{name:a+".x",value:Math.round(t.pageX-n.left)},{name:a+".y",value:Math.round(t.pageY-n.top)}]),setTimeout(function(){r.removeData(i)},0)}),c(document).on("click","form[data-ajax=true] :submit",function(t){var a=t.currentTarget.name,e=c(t.target),r=c(e.parents("form")[0]);r.data(i,a?[{name:a,value:t.currentTarget.value}]:[]),r.data(u,e),setTimeout(function(){r.removeData(i),r.removeData(u)},0)}),c(document).on("submit","form[data-ajax=true]",function(t){var a,e=c(this).data(i)||[],r=c(this).data(u),n=r&&r.hasClass("cancel");(t.preventDefault(),n||(!(a=c(this).data(o))||!a.validate||a.validate()))&&l(this,{url:this.action,type:this.method||"GET",data:e.concat(c(this).serializeArray())})})}(jQuery);