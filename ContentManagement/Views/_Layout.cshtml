@using ContentManagement.ViewComponents
@using Microsoft.AspNetCore.Http.Extensions
@inject Microsoft.AspNetCore.Hosting.IHostingEnvironment HostingEnvironment

<!DOCTYPE html>
<html lang="@RequestService.CurrentLanguage().Language.ToString().ToLowerInvariant()">
<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="~/favicon.png" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    @*<meta name="application-name" content="CMS" />
        <meta name="msapplication-config" content="/browserconfig.xml" />*@
    @*<style>@Html.Raw(System.IO.File.ReadAllText("wwwroot/css/abovethefold.css"))</style>*@
    <link asp-if="RequestService.IsRtl()" rel="stylesheet" href="~/fonts/farsifonts.min.css" />
    <link asp-if="RequestService.IsLtr()" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,500,500i,600,600i,700,700i&amp;subset=latin-ext" />
    <link rel="stylesheet" href="~/css/common.min.css" asp-append-version="true" />
    <link asp-if="RequestService.IsRtl()" rel="stylesheet" href="~/css/rtl.min.css" asp-append-version="true" />
    @*<link asp-if="RequestService.IsRtl()" rel="stylesheet" href="~/css/portal.rtl.min.css" asp-append-version="true" />*@
    <link asp-if="RequestService.IsLtr()" rel="stylesheet" href="~/css/ltr.min.css" asp-append-version="true" />
    @*<link asp-if="RequestService.IsLtr()" rel="stylesheet" href="~/css/portal.ltr.min.css" asp-append-version="true" />*@
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>

    <seo-link-canonical base="@($"//{Context.Request.Host.Value}/")" value="@WebUtility.UrlDecode(Context.Request.GetDisplayUrl())" />
    <seo-title></seo-title>
    <seo-meta-description />
    <seo-content-language />
    <seo-meta-robots-index value="ContentManagement.Services.RobotsIndex.IndexFollow" />

    <noscript>
        <meta http-equiv="refresh" content="0;url=/statics/NoScript.html" />
    </noscript>
</head>
<body>

    @await Component.InvokeAsync(nameof(HeaderLinks))

    @await Component.InvokeAsync(nameof(HeaderLogo))

    @await Component.InvokeAsync(nameof(HeaderNavbar))

    @RenderBody()

    @await Component.InvokeAsync(nameof(Footer))

    <div asp-if="@User.Identity.IsAuthenticated" condition-style-left="@(RequestService.IsRtl() ? "0" : "")" condition-style-right="@(RequestService.IsLtr() ? "0" : "")" style="position: fixed; top: 2.5rem; padding: 2px 5px; background-color: coral; z-index: 1000;">
        <a style="color: #fff; text-decoration: none;" target="_blank" href="/manage/" title="ورود به پنل مدیریت" data-tippy-placement="@(RequestService.IsRtl() ? "right" : "left")" data-tippy>
            <i class="fas fa-tachometer-alt"></i>&nbsp;پنل مدیریت
        </a>
    </div>

    <span class="d-none" id="js-global-info"
          data-slides-path="/@ContentManagement.Infrastructure.Constants.SlidesRootPath/"
          data-page-image-path="/@ContentManagement.Infrastructure.Constants.PagesRootPath/"
          data-content-image-path="/@ContentManagement.Infrastructure.Constants.ContentsRootPath/"
          data-fetch-contents-path="/content/fetchcontents/"></span>

    <script>
        var currentLanguage = '@RequestService.CurrentLanguage().Language',
            currentDirection = '@RequestService.CurrentLanguage().Direction',
            currentSubDomain = '@RequestService.CurrentSubDomain()',
            isRtl = @RequestService.IsRtl().ToString().ToLowerInvariant(),
            isLtr = @RequestService.IsLtr().ToString().ToLowerInvariant(),
            isSubPortal = @RequestService.IsSubPortal().ToString().ToLowerInvariant();
    </script>

    <!-- Optional: include a polyfill for ES6 Promises for IE11 and Android browser -->
    <script src="https://unpkg.com/promise-polyfill@7.1.0/dist/promise.min.js"></script>
    <script src="https://unpkg.com/tippy.js/dist/tippy.all.min.js"></script>
    <script src="~/js/common.min.js" asp-append-version="true"></script>
    @*<script asp-if="RequestService.IsRtl()" src="~/js/rtl.min.js" asp-append-version="true"></script>*@
    @*<script asp-if="RequestService.IsRtl()" src="~/js/portal.rtl.min.js" asp-append-version="true"></script>*@
    @*<script asp-if="RequestService.IsLtr()" src="~/js/ltr.min.js" asp-append-version="true"></script>*@
    @*<script asp-if="RequestService.IsLtr()" src="~/js/portal.ltr.min.js" asp-append-version="true"></script>*@
    @RenderSection("scripts", required: false)
</body>
</html>

@*<environment names="Development">
        @Bundler.Unpack(HostingEnvironment.ContentRootPath, "/css/site.min.css")
    </environment>
    <environment names="Staging,Production">
        <link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true" />
    </environment>

    <environment names="Development">
        @Bundler.Unpack(HostingEnvironment.ContentRootPath, "/js/site.min.js")
    </environment>
    <environment names="Staging,Production">
        <script src="~/js/site.min.js" asp-append-version="true"></script>
    </environment>*@
